<!DOCTYPE HTML>
<html>
    <head>
        <script>
            function drawTempOutPlot() {
                let dataPoints = [];
                let options =  {
                    animationEnabled: true,
                    theme: "light2",
                    title: {
                        text: "Temperature outside"
                    },
                    axisX: {
                        valueFormatString: "HH:mm",
                    },
                    axisY: {
                        title: "°C",
                        valueFormatString: "##.00",
                        titleFontSize: 20
                    },
                    data: [{
                        type: "spline",
                        dataPoints: dataPoints
                    }]
                };

                function addData(data) {
                    for (var i = 0; i < data.length; i++) {
                        dataPoints.push({
                            x: new Date(data[i].timestamp*1000),
                            y: data[i].temp_outside/100
                        });
                    }
                    $("#chartContainer1").CanvasJSChart(options);
                }
                
                $.getJSON("http://192.168.8.69:3000/api/measurements/getAll", addData);
            }

            function drawTempInPlot() {
                let dataPoints = [];
                let options =  {
                    animationEnabled: true,
                    theme: "light2",
                    title: {
                        text: "Temperature inside"
                    },
                    axisX: {
                        valueFormatString: "HH:mm",
                    },
                    axisY: {
                        title: "°C",
                        valueFormatString: "##.00",
                        titleFontSize: 20
                    },
                    data: [{
                        type: "spline",
                        dataPoints: dataPoints
                    }]
                };

                function addData(data) {
                    for (var i = 0; i < data.length; i++) {
                        dataPoints.push({
                            x: new Date(data[i].timestamp*1000),
                            y: data[i].temp_inside/100
                        });
                    }
                    $("#chartContainer2").CanvasJSChart(options);
                }
                $.getJSON("http://192.168.8.69:3000/api/measurements/getAll", addData);
            }

            function drawPresPlot() {
                let dataPoints = [];
                let options =  {
                    animationEnabled: true,
                    theme: "light2",
                    title: {
                        text: "Pressure"
                    },
                    axisX: {
                        valueFormatString: "HH:mm",
                    },
                    axisY: {
                        title: "hPa",
                        valueFormatString: "####.00",
                        titleFontSize: 20
                    },
                    data: [{
                        type: "spline",
                        dataPoints: dataPoints
                    }]
                };

                function addData(data) {
                    for (var i = 0; i < data.length; i++) {
                        dataPoints.push({
                            x: new Date(data[i].timestamp*1000),
                            y: data[i].pressure/100
                        });
                    }
                    $("#chartContainer3").CanvasJSChart(options);
                }
                $.getJSON("http://192.168.8.69:3000/api/measurements/getAll", addData);
            }

            function drawHumidPlot() {
                let dataPoints = [];
                let options =  {
                    animationEnabled: true,
                    theme: "light2",
                    title: {
                        text: "Temperature inside"
                    },
                    axisX: {
                        valueFormatString: "HH:mm",
                    },
                    axisY: {
                        title: "°C",
                        valueFormatString: "##.0",
                        titleFontSize: 20
                    },
                    data: [{
                        type: "spline",
                        dataPoints: dataPoints
                    }]
                };

                function addData(data) {
                    for (var i = 0; i < data.length; i++) {
                        dataPoints.push({
                            x: new Date(data[i].timestamp*1000),
                            y: data[i].humidity
                        });
                    }
                    $("#chartContainer4").CanvasJSChart(options);
                }
                $.getJSON("http://192.168.8.69:3000/api/measurements/getAll", addData);
            }

            window.onload = function() {
                drawTempInPlot();
                drawTempOutPlot();
                drawPresPlot()
                drawHumidPlot();
            }
        </script>
    </head>
    <body>
        <div class="myDiv" id="chartContainer1" style="height: 370px; width: 49%;"></div>
        <div class="myDiv" id="chartContainer2" style="height: 370px; width: 49%;"></div>
        <div class="myDiv" id="chartContainer3" style="height: 370px; width: 49%;"></div>
        <div class="myDiv" id="chartContainer4" style="height: 370px; width: 49%;"></div>
        <script src="jquery-3.6.0.min.js"></script>
        <script src="jquery.canvasjs.min.js"></script>
    </body>
    <style>
        .myDiv {
            display: inline-block;
        }
    </style>

</html>